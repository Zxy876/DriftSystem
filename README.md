[![zread](https://img.shields.io/badge/Ask_Zread-_.svg?style=flat&color=00b0aa&labelColor=000000&logo=data%3Aimage%2Fsvg%2Bxml%3Bbase64%2CPHN2ZyB3aWR0aD0iMTYiIGhlaWdodD0iMTYiIHZpZXdCb3g9IjAgMCAxNiAxNiIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KPHBhdGggZD0iTTQuOTYxNTYgMS42MDAxSDIuMjQxNTZDMS44ODgxIDEuNjAwMSAxLjYwMTU2IDEuODg2NjQgMS42MDE1NiAyLjI0MDFWNC45NjAxQzEuNjAxNTYgNS4zMTM1NiAxLjg4ODEgNS42MDAxIDIuMjQxNTYgNS42MDAxSDQuOTYxNTZDNS4zMTUwMiA1LjYwMDEgNS42MDE1NiA1LjMxMzU2IDUuNjAxNTYgNC45NjAxVjIuMjQwMUM1LjYwMTU2IDEuODg2NjQgNS4zMTUwMiAxLjYwMDEgNC45NjE1NiAxLjYwMDFaIiBmaWxsPSIjZmZmIi8%2BCjxwYXRoIGQ9Ik00Ljk2MTU2IDEwLjM5OTlIMi4yNDE1NkMxLjg4ODEgMTAuMzk5OSAxLjYwMTU2IDEwLjY4NjQgMS42MDE1NiAxMS4wMzk5VjEzLjc1OTlDMS42MDE1NiAxNC4xMTM0IDEuODg4MSAxNC4zOTk5IDIuMjQxNTYgMTQuMzk5OUg0Ljk2MTU2QzUuMzE1MDIgMTQuMzk5OSA1LjYwMTU2IDE0LjExMzQgNS42MDE1NiAxMy43NTk5VjExLjAzOTlDNS42MDE1NiAxMC42ODY0IDUuMzE1MDIgMTAuMzk5OSA0Ljk2MTU2IDEwLjM5OTlaIiBmaWxsPSIjZmZmIi8%2BCjxwYXRoIGQ9Ik0xMy43NTg0IDEuNjAwMUgxMS4wMzg0QzEwLjY4NSAxLjYwMDEgMTAuMzk4NCAxLjg4NjY0IDEwLjM5ODQgMi4yNDAxVjQuOTYwMUMxMC4zOTg0IDUuMzEzNTYgMTAuNjg1IDUuNjAwMSAxMS4wMzg0IDUuNjAwMUgxMy43NTg0QzE0LjExMTkgNS42MDAxIDE0LjM5ODQgNS4zMTM1NiAxNC4zOTg0IDQuOTYwMVYyLjI0MDFDMTQuMzk4NCAxLjg4NjY0IDE0LjExMTkgMS42MDAxIDEzLjc1ODQgMS42MDAxWiIgZmlsbD0iI2ZmZiIvPgo8cGF0aCBkPSJNNCAxMkwxMiA0TDQgMTJaIiBmaWxsPSIjZmZmIi8%2BCjxwYXRoIGQ9Ik00IDEyTDEyIDQiIHN0cm9rZT0iI2ZmZiIgc3Ryb2tlLXdpZHRoPSIxLjUiIHN0cm9rZS1saW5lY2FwPSJyb3VuZCIvPgo8L3N2Zz4K&logoColor=ffffff)](https://zread.ai/Zxy876/DriftSystem)
[![å®Œæ•´æ–‡æ¡£](https://img.shields.io/badge/æ–‡æ¡£-zread.ai-00b0aa)](https://zread.ai/Zxy876/DriftSystem)

# DriftSystem Â· å¿ƒæ‚¦å®‡å®™

> **ç”¨è‡ªç„¶è¯­è¨€é©±åŠ¨ä¸–ç•Œ** â€” ä¸€ä¸ªå®Œå…¨ç”± AI é©±åŠ¨çš„ Minecraft å‰§æƒ…ç³»ç»Ÿ

[![Demo Video](https://img.shields.io/badge/Watch_Demo-bilibili-pink?logo=bilibili)](https://b23.tv/UhqhkE9)
[![License: MIT](https://img.shields.io/badge/License-MIT-blue.svg)](./LICENSE)

---

## è§†é¢‘ä»‹ç»

[ã€æˆ‘åšäº†ä¸€ä¸ªã€Œç”¨è‡ªç„¶è¯­è¨€é©±åŠ¨ä¸–ç•Œã€çš„ Minecraft AI å‰§æƒ…ç³»ç»Ÿï½œDriftSystem Demo](https://b23.tv/UhqhkE9)](https://b23.tv/UhqhkE9)

> ç‚¹å‡»ä¸Šæ–¹é“¾æ¥è§‚çœ‹å®Œæ•´æ¼”ç¤ºè§†é¢‘ï¼Œäº†è§£ DriftSystem çš„æ ¸å¿ƒåŠŸèƒ½å’Œç©æ³•ä½“éªŒã€‚

---

## ç®€ä»‹

DriftSystem (å¿ƒæ‚¦å®‡å®™) å°† Minecraft æœåŠ¡å™¨ä¸ AI æ•…äº‹å¼•æ“èåˆï¼Œç©å®¶åªéœ€ä½¿ç”¨è‡ªç„¶è¯­è¨€å³å¯é©±åŠ¨å‰§æƒ…ã€æ”¹é€ ä¸–ç•Œã€åˆ›å»ºå…³å¡å¹¶æ¨è¿›å¤šäººååŒå†’é™©ã€‚

- **Java æ’ä»¶**è´Ÿè´£å³æ—¶åé¦ˆä¸ä¸–ç•Œæ¸²æŸ“
- **Python FastAPI åç«¯**æä¾›æ„å›¾è¯†åˆ«ã€å‰§æƒ…ç¼–æ’ã€DSL æ³¨å…¥å’Œæ•™ç¨‹/ä»»åŠ¡é€»è¾‘

---

## æ ¸å¿ƒç‰¹æ€§

### å¤šæ„å›¾è‡ªç„¶è¯­è¨€ç®¡çº¿
- `IntentRouter2` + `IntentDispatcher2` å®ç°èŠå¤©é©±åŠ¨çš„ä¸€å‘å¤šå‘½ä»¤è§£æ
- æ”¯æŒå¯¹è¯ã€ä¸–ç•Œæ§åˆ¶ã€å…³å¡è·³è½¬ã€å‰§æƒ…åˆ›ä½œç­‰å¤šç§æ„å›¾

### Heart Levels å‰§æƒ…å¼•æ“
- å†…ç½® **30+ ç« èŠ‚**ï¼Œæ”¯æŒå‰§æƒ…åˆ†æ”¯ã€æ¨èã€æ•…äº‹åˆ›ä½œä¸å°åœ°å›¾å¯¼èˆª
- AI ç”Ÿæˆå¼å…³å¡ç³»ç»Ÿï¼Œç”¨è‡ªç„¶è¯­è¨€å³æ—¶åˆ›å»ºæ–°å†…å®¹

### ä¸–ç•Œ/é•œå¤´ç³»ç»Ÿ
- `SceneAwareWorldPatchExecutor` å®ç°åŠ¨æ€ä¸–ç•Œæ¸²æŸ“
- HUDã€CinematicController ä¸ NPC ç®¡ç†å™¨è”åŠ¨
- æƒ…ç»ªå¤©æ°”ç³»ç»Ÿï¼šæ ¹æ®å‰§æƒ…æ°›å›´æ”¹å˜å¤©æ°”ã€å…‰ç…§å’ŒéŸ³ä¹

### æ•™å­¦ä¸åˆ›ä½œä½“éªŒ
- `TutorialManager` ä¿æŠ¤æ–°æ‰‹æµç¨‹ï¼Œ7 æ­¥å¼•å¯¼ç³»ç»Ÿ
- `StoryCreativeManager` æ”¯æŒç©å®¶å³å…´ DSL æ³¨å…¥

### FastAPI åç«¯
- ç»“æ„åŒ– API è¦†ç›–æ„å›¾ã€ä¸–ç•Œã€å‰§æƒ…ã€NPCã€æ•™ç¨‹ã€æç¤ºã€æ ‘å½¢ DSLã€MiniMap PNG
- å®Œæ•´çš„è‡ªæ„ˆä¸æµ‹è¯•è¦†ç›–

---

## ç³»ç»Ÿæ¶æ„

```
              â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
              â”‚ Minecraft    â”‚
              â”‚ Paper 1.20.x â”‚
              â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜
                     â”‚ Bukkit API
        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
        â”‚ DriftSystem Plugin      â”‚
        â”‚ Java 17 + Maven         â”‚
        â”‚ - èŠå¤©ç›‘å¬ + æ„å›¾è·¯ç”±   â”‚
        â”‚ - ä¸–ç•Œ/å‰§æƒ…/æ•™ç¨‹å¼•æ“    â”‚
        â”‚ - HUD + Cinematic + NPC â”‚
        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                     â”‚ HTTP/JSON
        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
        â”‚ FastAPI Backend         â”‚
        â”‚ Python 3.10+            â”‚
        â”‚ - AI Intent / Story DSL â”‚
        â”‚ - Heart Levels æ•°æ®      â”‚
        â”‚ - ä¸–ç•Œ/åœ°å›¾ REST æ¥å£    â”‚
        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## å¿«é€Ÿå¼€å§‹

### æ–¹å¼ä¸€ï¼šDemo ä½“éªŒåŒ…ï¼ˆæ¨èï¼‰

é€‚åˆæ•™å¸ˆå’Œå¿«é€Ÿä½“éªŒç”¨æˆ·ã€‚

1. **ä¸‹è½½ HMCL å¯åŠ¨å™¨**ï¼šhttps://hmcl.huangyuhui.net/
2. **å®‰è£… Minecraft 1.20.1**ï¼šåœ¨ HMCL ä¸­å®‰è£… Minecraft Java ç‰ˆ 1.20.1
3. **ä¸‹è½½ Demo åŒ…**ï¼šè§£å‹ `DriftSystem_Demo.zip` åˆ°æ¡Œé¢
4. **å¯åŠ¨**ï¼šåŒå‡» `å¯åŠ¨æ¸¸æˆ.bat`ï¼Œç­‰å¾…è‡ªåŠ¨å®‰è£…å®Œæˆ
5. **è¿›å…¥æ¸¸æˆ**ï¼šä¿æŒä¸¤ä¸ªé»‘è‰²çª—å£å¼€å¯ï¼Œåœ¨ HMCL ä¸­å¯åŠ¨æ¸¸æˆï¼Œæ·»åŠ æœåŠ¡å™¨ `localhost`

> è¯¦è§ [DriftSystem_Demo/README_FIRST.txt](DriftSystem_Demo/README_FIRST.txt)

### æ–¹å¼äºŒï¼šå¼€å‘è€…éƒ¨ç½²

```bash
# 1. å¯åŠ¨åç«¯æœåŠ¡
cd backend
python -m venv venv
source venv/bin/activate  # Windows: venv\Scripts\activate
pip install -r requirements.txt
uvicorn app.main:app --host 0.0.0.0 --port 8000 --reload

# 2. æ„å»ºå¹¶éƒ¨ç½²æ’ä»¶
cd system/mc_plugin
./build.sh

# 3. å¯åŠ¨ Minecraft æœåŠ¡å™¨
cd backend/server
java -Xmx4G -Xms2G -jar paper-*.jar
```

### ä¸€é”®å¯åŠ¨è„šæœ¬

```bash
./start_all.sh  # è‡ªåŠ¨æ„å»ºã€å¯åŠ¨åç«¯å’ŒæœåŠ¡å™¨
```

---

## æ¸¸æˆå†…å‘½ä»¤

| å‘½ä»¤ | åŠŸèƒ½ |
|------|------|
| `/drift status` | æŸ¥çœ‹ç³»ç»ŸçŠ¶æ€ |
| `/drift sync` | åŒæ­¥åç«¯æ•°æ® |
| `/drift debug` | åˆ‡æ¢è°ƒè¯•æ¨¡å¼ |
| `/storycreative` | æ‰“å¼€æ•…äº‹åˆ›ä½œ HUD |
| `/recommend` | è·å–å…³å¡æ¨è |
| `/questlog` | æŸ¥çœ‹ä»»åŠ¡æ—¥å¿— |
| `/drift tutorial start` | å¼€å§‹/é‡æ–°å¼€å§‹æ•™å­¦ |

---

## é¡¹ç›®ç»“æ„

```
backend/               # FastAPI æœåŠ¡ã€æ ¸å¿ƒå‰§æƒ…/ä¸–ç•Œå¼•æ“ä¸æ•°æ®é›†
â”‚   â”œâ”€â”€ app/          # API è·¯ç”±ã€æ ¸å¿ƒ AI å¼•æ“ã€å‰§æƒ…ç³»ç»Ÿ
â”‚   â”œâ”€â”€ data/         # Heart Levelsã€Flagship Levelsã€NPC æ•°æ®
â”‚   â””â”€â”€ server/       # åµŒå…¥å¼ Paper æœåŠ¡å™¨é…ç½®
â”‚
system/mc_plugin/      # Minecraft æ’ä»¶æºç 
â”‚   â”œâ”€â”€ src/main/java/com/driftmc/
â”‚   â”‚   â”œâ”€â”€ intent/   # æ„å›¾è·¯ç”±ä¸åˆ†å‘
â”‚   â”‚   â”œâ”€â”€ world/    # ä¸–ç•Œ patch æ‰§è¡Œå™¨
â”‚   â”‚   â”œâ”€â”€ story/    # å‰§æƒ…å¼•æ“é›†æˆ
â”‚   â”‚   â”œâ”€â”€ npc/      # NPC è¡Œä¸ºç³»ç»Ÿ
â”‚   â”‚   â””â”€â”€ tutorial/ # æ–°æ‰‹æ•™å­¦ç³»ç»Ÿ
â”‚   â””â”€â”€ pom.xml       # Maven æ„å»ºé…ç½®
â”‚
docs/                  # ç³»ç»Ÿè®¾è®¡æ–‡æ¡£
â”‚   â”œâ”€â”€ NPC_SYSTEM.md
â”‚   â”œâ”€â”€ GEN_LEVEL_SYSTEM.md
â”‚   â”œâ”€â”€ TUTORIAL_SYSTEM.md
â”‚   â””â”€â”€ ...
â”‚
phases/                # é¡¹ç›®é˜¶æ®µè§„åˆ’
tools/, scripts/       # æ„å»ºã€ä¿®å¤ã€éƒ¨ç½²è‡ªåŠ¨åŒ–è„šæœ¬
```

---

## é…ç½®è¯´æ˜

### åç«¯ç¯å¢ƒå˜é‡ (`backend/.env`)

```env
DEEPSEEK_API_KEY=sk-xxxxx
OPENAI_BASE_URL=https://api.deepseek.com/v1
OPENAI_MODEL=deepseek-chat
```

### æ’ä»¶é…ç½® (`plugins/DriftSystem/config.yml`)

```yaml
backend_url: "http://127.0.0.1:8000"

system:
  debug: false

story:
  start_level: "level_01"

world:
  allow_world_modification: true
  allow_story_creation: true
```

---

## å¼€å‘ä¸æµ‹è¯•

```bash
# åç«¯æµ‹è¯•
cd backend && pytest

# æ„å»ºæ’ä»¶
cd system/mc_plugin && mvn package

# é›†æˆæµ‹è¯•
./test_integration.sh
./test_tutorial.sh
```

---

## æ•…éšœæ’æŸ¥

| é—®é¢˜ | è§£å†³æ–¹æ¡ˆ |
|------|----------|
| æ’ä»¶æ— æ³•è¿æ¥åç«¯ | æ£€æŸ¥ `curl http://127.0.0.1:8000/`ï¼Œç¡®è®¤åç«¯è¿è¡Œ |
| æ„å›¾è¯†åˆ«å¤±è´¥ | æ£€æŸ¥ `DEEPSEEK_API_KEY` æ˜¯å¦è®¾ç½®æ­£ç¡® |
| ä¸–ç•Œ patch ä¸æ‰§è¡Œ | å¯ç”¨ `system.debug: true` æŸ¥çœ‹æ—¥å¿— |
| æ•™ç¨‹æ— æ³•é‡ç½® | æ‰§è¡Œ `/reload` æˆ–é‡å¯æœåŠ¡å™¨ |

æ›´å¤šé—®é¢˜è¯·å‚è€ƒ [DEPLOYMENT.md](DEPLOYMENT.md) å’Œ [INTEGRATION.md](INTEGRATION.md)ã€‚

---

## æ–‡æ¡£ç´¢å¼•

- [SUMMARY.md](SUMMARY.md) - å®Œæ•´é›†æˆæ€»ç»“
- [DEPLOYMENT.md](DEPLOYMENT.md) - å®Œæ•´éƒ¨ç½²æŒ‡å—
- [INTEGRATION.md](INTEGRATION.md) - æŠ€æœ¯é›†æˆæ–‡æ¡£
- [TUTORIAL_SYSTEM.md](TUTORIAL_SYSTEM.md) - æ•™å­¦ç³»ç»Ÿæ–‡æ¡£
- [NPC_BEHAVIORS_TESTING.md](NPC_BEHAVIORS_TESTING.md) - NPC è¡Œä¸ºè§„èŒƒ
- [GEN_LEVEL_SYSTEM.md](docs/GEN_LEVEL_SYSTEM.md) - ç”Ÿæˆå¼å…³å¡ç³»ç»Ÿ

æ›´å¤šæ–‡æ¡£è¯·è®¿é—® [zread.ai/Zxy876/DriftSystem](https://zread.ai/Zxy876/DriftSystem)

---

## ç³»ç»Ÿè¦æ±‚

- **Python**: 3.10+
- **Java**: 17+
- **Maven**: 3.6+
- **Minecraft**: Paper 1.20.1
- **å†…å­˜**: 4GB+ RAM
- **ç½‘ç»œ**: ç¨³å®šè¿æ¥ï¼ˆç”¨äº AI APIï¼‰

---

## è´¡çŒ®æŒ‡å—

æ¬¢è¿é€šè¿‡ä»¥ä¸‹æ–¹å¼å‚ä¸ï¼š

- æäº¤ Issue æŠ¥å‘Šé—®é¢˜
- æäº¤ Pull Request è´¡çŒ®ä»£ç 
- åˆ›ä½œæ–°çš„å‰§æƒ…å…³å¡
- åˆ†äº« DSL è®¾è®¡æ¨¡å¼

---

## è®¸å¯è¯

æœ¬é¡¹ç›®ä»¥ [MIT License](./LICENSE) æˆæƒå‘å¸ƒï¼Œå¯è‡ªç”±ä½¿ç”¨ã€ä¿®æ”¹ä¸åˆ†å‘ã€‚

---

**[å…³äºæœ¬é¡¹ç›®](ABOUT.md)** Â· **[å®Œæ•´æ–‡æ¡£ @ zread](https://zread.ai/Zxy876/DriftSystem)**

**è®©å‰§æƒ…åœ¨ Minecraft ä¸­è‡ªç„¶ç”Ÿé•¿** ğŸŒ±

**ä½“éªŒå®Œå…¨ç”±å¯¹è¯é©±åŠ¨çš„å†’é™©ä¹‹æ—…** ğŸš€
