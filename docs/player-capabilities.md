# 玩家真实可玩的能力清单（2026-01 基线）

以下能力均已在 `scienceline` 分支验证可用，描述按「玩家能做什么 → 如何触发 → 系统反馈」给出。默认假设玩家为普通成员（非 OP），除非特别说明。

## 自然语言驱动
- **推进剧情节点**：在聊天栏直接描述当前想法或行动，例如“我准备继续前进”。系统会调用 `/world/apply`，返回新的剧情节点与世界补丁；对话面板与选择面板会跟随刷新。
- **快速查看当前进度**：发送“我在哪一关”或类似提问，后端会返回当前关卡信息；若需要详细信息，可结合 `/drift status` 查看节点索引与上一条选择。
- **请求小地图**：聊天包含“地图”“导航”等关键词时，意图解析会触发 `SHOW_MINIMAP`，插件异步生成纸质地图道具并发放给玩家，同时在聊天中展示当前关卡与推荐关卡。
- **跳转指定关卡**：自然语言提到“去第三关”“到 level_05”等，解析为 `GOTO_LEVEL`，插件会安全传送并加载对应关卡场景。
- **调节昼夜与天气**：对话包含“变成白天”“下雨”等关键词时，触发 `SET_DAY`、`SET_NIGHT` 或 `SET_WEATHER`，世界立即应用对应时间或天气补丁。

## 剧情与同步指令
- **`/drift status`**：输出玩家当前关卡、节点索引、上一次选择及是否可推进。
- **`/drift sync`**：从后端重新拉取剧情状态（已修复为 GET 调用，不再出现 405），同步后自动调用 `status`。
- **`/drift tutorial <start|hint|skip>`**：启动教学流程、获取当前提示或跳过教程（需二次确认）。
- **`/advance [文本]` / `/storynext`**：手动请求推进剧情；可附带一句话作为当前动作描述。
- **`/talk <文本>` / `/saytoai <文本>`**：将一句话直接发送给意图管线或故事引擎，用于精确测试剧情响应。
- **`/recommend`**：在 HUD 中展示 StoryGraph 推荐的下一组章节。
- **`/questlog`**：弹出任务日志面板，列出当前激活任务与里程碑。

## 关卡与探索
- **`/levels`**：列出所有可访问的剧情关卡。
- **`/level <level_id>`**：安全传送到指定关卡，并尝试加载 `bootstrap_patch` 场景。
- **`/minimap`**：手动拉取最新小地图，与自然语言触发共用一套管线。
- **`/tp2 [x y z]`**：相对或绝对传送；若省略坐标则按照默认偏移前移 3 格。
- **`/time2 <day|night|tick>`**：直接设置时间到白天、夜晚或指定 tick。
- **`/sayc <文本>`**：以心悦风格在服务器内广播一条消息。
- **`/heartmenu`**：打开帮助菜单，查看核心指令与交互提示。

## 教学与安全辅助
- **剧情教程守护**：若仍在教程阶段，系统会阻止跳回教程以外关卡并给出提示；关卡跳转请求会自动重定向至 `flagship_03`。
- **世界补丁同步教程状态**：任何通过剧情返回的 `world_patch` 都会与教学进度联动，确保 HUD 与任务提示保持一致。

## 仅限管理权限
- **`/planjump <plan_id>`**：需要 `drift.planjump` 权限，传送到建造计划记录的坐标。
- **`/taskdebug`**：需要 `drift.taskdebug` 权限，输出任务调试信息。

## 暂不可用 / 已冻结
- **自然语言创建剧情**：`world.allow_story_creation` 默认关闭，`/story/inject` 的 LLM 路径在插件端被阻断。
- **CityPhone 模板套用**：UI 按钮与 `apply_template` 动作已移除，仅保留档案浏览能力。
- **展品实例回放**：`ExhibitInstanceRepository` 默认在运行时禁用，如需启用需设置 `DRIFT_ENABLE_EXHIBIT_INSTANCES=1` 并确认对应数据可用。
